/*! fuzzy-finder-wp 2016-12-10 */
var ffwp_finder=ffwp_finder||{};jQuery(document).ready(function(a){ffwp_finder.init=function(){this.results=[],this.status="waiting",this.cache=this.cache||{},this.cache.body=a("body"),this.cache.finder=a("#ffwp-finder"),this.cache.search=this.cache.finder.find("#ffwp-search"),this.cache.results=this.cache.finder.find(".ffwp-results"),this.cache.status=this.cache.finder.find(".ffwp-status"),this.cache.progress=this.cache.status.find(".ffwp-progress"),this.cache.body.on("keyup",this.handleShortcuts),this.cache.search.on("keyup",this.search),this.cache.finder.on("click",this.handleFinderWrapperEvents),this.cache.finder.on("ffwpSearchBegun",this.setStatusSearching),this.cache.finder.on("ffwpSearchFinished",this.setStatusComplete)},ffwp_finder.open=function(){ffwp_finder.cache.body.addClass("ffwp-finder-is-visible"),ffwp_finder.cache.finder.addClass("is-visible"),setTimeout(function(){ffwp_finder.cache.search.focus()},300)},ffwp_finder.close=function(){ffwp_finder.cache.body.removeClass("ffwp-finder-is-visible"),ffwp_finder.cache.finder.removeClass("is-visible"),setTimeout(function(){ffwp_finder.cache.search.val(""),ffwp_finder.clearResults(),ffwp_finder.setStatusWaiting()},300)},ffwp_finder.handleShortcuts=function(a){return a.ctrlKey&&a.shiftKey&&70==a.which?void ffwp_finder.open():27==a.which&&ffwp_finder.cache.finder.hasClass("is-visible")?void ffwp_finder.close():void 0},ffwp_finder.handleFinderWrapperEvents=function(a){"click"==a.type&&"ffwp-finder"==a.target.id&&ffwp_finder.close()},ffwp_finder.search=function(){var a=ffwp_finder.cache.search.val();if(ffwp_finder.current_term=a,a.length<3)return ffwp_finder.clearResults(),void ffwp_finder.setStatusWaiting();for(var b=ffwp_finder.results.length-1;b>=0;b--)new RegExp(a,"i").test(ffwp_finder_settings.strings[ffwp_finder.results[b]])||ffwp_finder.removeResult(ffwp_finder.results[b]);ffwp_finder.setStatusSearching();var c=0,d=ffwp_finder_settings.strings.length,e=function(){for(c;d>c;c++)if(new RegExp(a,"i").test(ffwp_finder_settings.strings[c])&&ffwp_finder.addResult(c),c+1>=d)c++,ffwp_finder.updateProgress(c,d),ffwp_finder.cache.finder.trigger("ffwpSearchFinished");else if(c%100===0){if(ffwp_finder.updateProgress(c,d),a!==ffwp_finder.current_term)break;setTimeout(e,0),c++;break}};e()},ffwp_finder.addResult=function(a){if(-1===ffwp_finder.results.indexOf(a)&&!(ffwp_finder.results.length>100)){ffwp_finder.results.push(a);var b=ffwp_finder_settings.result_template.replace("{url}",ffwp_finder_settings.urls[a]).replace("{string}",ffwp_finder_settings.strings[a]).replace("{index}",a.toString());ffwp_finder.cache.results.append(b)}},ffwp_finder.removeResult=function(a){var b=ffwp_finder.results.indexOf(a);b>-1&&ffwp_finder.results.splice(b,1),ffwp_finder.cache.results.find("#ffwp-result-"+a.toString()).remove()},ffwp_finder.clearResults=function(){ffwp_finder.results=[],ffwp_finder.cache.results.empty()},ffwp_finder.setStatusFetching=function(){ffwp_finder.cache.status.removeClass("fetching complete waiting").addClass("fetching"),ffwp_finder.status="fetching",ffwp_finder.clearProgress()},ffwp_finder.setStatusSearching=function(){ffwp_finder.cache.status.removeClass("fetching complete waiting").addClass("searching"),ffwp_finder.status="searching"},ffwp_finder.setStatusComplete=function(){ffwp_finder.cache.status.removeClass("fetching searching waiting").addClass("complete"),ffwp_finder.status="complete"},ffwp_finder.setStatusWaiting=function(){ffwp_finder.cache.status.removeClass("fetching searching complete").addClass("waiting"),ffwp_finder.status="waiting",ffwp_finder.clearProgress()},ffwp_finder.updateProgress=function(a,b){a===b?ffwp_finder.cache.progress.html(ffwp_finder.results.length+" matches"):ffwp_finder.cache.progress.html(a+"/"+b)},ffwp_finder.clearProgress=function(){ffwp_finder.cache.progress.empty()},ffwp_finder.init()});